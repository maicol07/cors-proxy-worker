# Example Environment Configuration for CORS Proxy Worker
# Copy this file and set these values as secrets in your Cloudflare Worker or GitHub repository

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# The target endpoint to proxy requests to
# Examples:
# - AWS Federation: https://signin.aws.amazon.com/federation
# - REST API: https://api.example.com
# - GraphQL API: https://graphql.example.com
TARGET_ENDPOINT=https://signin.aws.amazon.com/federation

# JSON array of allowed origins (domains that can make requests to this worker)
# Must be valid JSON array format
# Examples:
# - Single origin: ["https://myapp.com"]
# - Multiple origins: ["https://app.com", "https://admin.com", "https://localhost:3000"]
# - Development setup: ["https://myapp.com", "https://staging.myapp.com", "http://localhost:3000"]
ALLOWED_ORIGINS=["https://sleepydeb.github.io", "https://localhost:3000", "https://127.0.0.1:3000"]

# JSON array of path patterns that should be proxied
# Supports simple wildcards with asterisk (*)
# Examples:
# - Exact path: ["/federation"]
# - Wildcard paths: ["/api/*", "/auth/*/callback"]
# - Multiple patterns: ["/api/*", "/auth", "/webhooks/*", "/health"]
ALLOWED_PATHS=["/federation", "/api/*", "/auth/*"]

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================

# Override the response payload for all requests
# Useful for endpoints that don't return CORS headers
# Set to null or leave empty to keep original response
# Examples:
# - Simple message: "CORS proxy is working"
# - JSON response: {"status": "ok", "message": "Proxied successfully"}
PAYLOAD_OVERRIDE=

# Maximum age for preflight request caching (in seconds)
# Default: 86400 (24 hours)
# Examples:
# - 1 hour: 3600
# - 1 day: 86400
# - 1 week: 604800
CORS_MAX_AGE=86400

# Additional CORS headers as JSON object
# Use this to add custom headers to all responses
# Must be valid JSON object format
# Examples:
# - Custom headers: {"X-Proxy-Version": "1.0", "X-Custom-Header": "value"}
# - Security headers: {"X-Frame-Options": "DENY", "X-Content-Type-Options": "nosniff"}
ADDITIONAL_HEADERS={}

# ============================================================================
# DEPLOYMENT CONFIGURATION (GitHub Actions)
# ============================================================================

# Cloudflare Account ID (required for deployment)
# Find this in your Cloudflare dashboard under the right sidebar
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id_here

# Cloudflare API Token (required for deployment)
# Create this in Cloudflare dashboard: My Profile > API Tokens > Create Token
# Use the "Edit Cloudflare Workers" template
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# Worker name (optional, defaults to 'cors-proxy-worker')
# This will be the subdomain: {worker-name}.{account}.workers.dev
CLOUDFLARE_WORKER_NAME=my-cors-proxy

# ============================================================================
# EXAMPLE CONFIGURATIONS FOR COMMON USE CASES
# ============================================================================

# Example 1: AWS Federation Proxy
# TARGET_ENDPOINT=https://signin.aws.amazon.com/federation
# ALLOWED_ORIGINS=["https://myapp.github.io"]
# ALLOWED_PATHS=["/federation"]

# Example 2: REST API Proxy
# TARGET_ENDPOINT=https://api.example.com
# ALLOWED_ORIGINS=["https://myapp.com", "https://admin.myapp.com"]
# ALLOWED_PATHS=["/api/v1/*", "/api/v2/*", "/health"]

# Example 3: GraphQL API Proxy
# TARGET_ENDPOINT=https://graphql.example.com
# ALLOWED_ORIGINS=["https://app.example.com"]
# ALLOWED_PATHS=["/graphql", "/playground"]

# Example 4: Multiple Service Proxy
# TARGET_ENDPOINT=https://gateway.example.com
# ALLOWED_ORIGINS=["https://app.com", "https://admin.com", "https://mobile.app.com"]
# ALLOWED_PATHS=["/auth/*", "/api/*", "/webhooks/*", "/uploads/*"]
# ADDITIONAL_HEADERS={"X-Proxy-Service": "cors-gateway", "X-Version": "1.0"}

# Example 5: Development Environment
# TARGET_ENDPOINT=http://localhost:8080
# ALLOWED_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]
# ALLOWED_PATHS=["/*"]
# CORS_MAX_AGE=0